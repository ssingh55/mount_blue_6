<!DOCTYPE>
<html>

<head>
    <meta charset="utf-8">
    <title>MatchesPlayedPerYear</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js">
    </script>
    <script src="http://requirejs.org/docs/release/2.2.0/minified/require.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script type="text/javascript" src="matches.json"></script>
</head>

<body>
    <div id="container"></div>
    <script language="JavaScript">
    $(document).ready(function() {
        var myData = data;
        var seasonYear = [];

        for (let i = 0; i < myData.length; i++) {
            seasonYear[i] = myData[i].season;
        }
        var chart = {
            type: 'bar'
        };
        var title = {
            text: 'Yearly number of matches'
        };

        var subtitle = {
            text: 'ipl stats charts'
        };

        var xAxis = {
            categories: Array.from(new Set(seasonYear))
        };

        var yAxis = {
            min: 0,
            title: {
                text: 'No. of matches',
                align: 'high'
            },
            labels: {
                overflow: 'justify'
            }
        };

        var plotOptions = {
            bar: {
                dataLabels: {
                    enabled: true
                }
            }
        };

        var legend = {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -40,
            y: 100,
            floating: true,
            borderWidth: 1,

            backgroundColor: (
                (Highcharts.theme && Highcharts.theme.legendBackgroundColor) ||
                '#FFFFFF'),
            shadow: true
        };

        var extractedYear = new Array();
        for (var yr of Array.from(new Set(seasonYear))) {
            var count = 0;
            for (let i = 0; i < seasonYear.length; i++) {
                if (yr == seasonYear[i])
                    count++;
            }
            extractedYear.push({'name':yr,'data':count});
        }

        var json = {};
        json.chart = chart;
        json.title = title;
        json.subtitle = subtitle;
        json.yAxis = yAxis;
        json.xAxis = xAxis;
        json.series = extractedYear;
        json.plotOptions = plotOptions;
    });
    </script>
    <!-- <script src="extract.js"></script> -->
</body>

</html>